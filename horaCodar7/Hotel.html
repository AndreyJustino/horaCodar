<html>

<head>

	<script>
	
		class Quarto{
			constructor(numeroQuarto, status){
				this.numeroQuarto = numeroQuarto
				this.status = status

			}
		}

		class Hospede{
			constructor(nome, valorDiaria, idade){
				this.nome = nome
				this.valorDiaria = valorDiaria
				this.idade = idade
			}

		}

		let quartos = [
			new Quarto(1, 'disponível'),
			new Quarto(2, 'ocupado'),
			new Quarto(3, 'disponível'),
			new Quarto(4, 'ocupado'),
			new Quarto(5, 'disponível'),
			new Quarto(6, 'ocupado'),
			new Quarto(7, 'disponível'),
			new Quarto(8, 'ocupado'),
			new Quarto(9, 'disponível'),
			new Quarto(10, 'ocupado'),
			new Quarto(11, 'disponível'),
			new Quarto(12, 'ocupado'),
			new Quarto(13, 'disponível'),
			new Quarto(14, 'ocupado'),
			new Quarto(15, 'disponível'),
			new Quarto(16, 'ocupado'),
			new Quarto(17, 'disponível'),
			new Quarto(18, 'ocupado'),
			new Quarto(19, 'disponível'),
			new Quarto(20, 'ocupado')
		];

		let hospedes = []

		function inicio() {

			let escolha = parseInt(prompt('Selecione uma opção\n1.) Reserva de Quartos \n2.) Cadastro de Hóspedes \n3.) Abastecimento de Carros \n4.) Sair'));

			switch(escolha){
				case 1:
					reserva_quartos()
					break;
				case 2:
					cadastro_hospedes()
					break;
				case 3:
					abastecer_carros()
					break;
				case 4:
					sair()
					break;
				default:
					erro()
					break;
			}

			
		}	
		
		function cadastro_hospedes() {
			alert('HOTEL PROANO - CADASTRO DE HÓSPEDES');

			let opcao = "CONTINUE"
			
			let quantGratuidade, quantMeia, valorTotal

			while(opcao.toUpperCase() == "CONTINUE"){
				let nomeHosp =  String(prompt("Informe seu nome:"))
				let idade = parseInt(prompt("Informe sua idade: "))

				let valorDiaria

				if(idade <= 6){
					valorDiaria = 0
					quantGratuidade++
				}else if(idade >= 60){
					valorDiaria = parseFloat(prompt("Informe o valor da diaria:"))
					valorDiaria = valorDiaria / 2	
					quantMeia++
					valorTotal += valorDiaria
				}else{
					valorDiaria = parseFloat(prompt("Informe o valor da diaria:"))
					valorTotal += valorDiaria
				}

				let userHospede = new Hospede(nomeHosp,valorDiaria,idade)

				hospedes.push(userHospede)

				opcao = String(prompt("Desejar continuar cadastrar mais hospede? [CONTINUE/PARE]")).toUpperCase()

				while(opcao != "CONTINUE" || opcao != "PARE"){
					opcao = String(prompt("Opcao invalida, escolha entre: CONTINUE ou PARE")).toUpperCase()
				}
			}

			alert(`Quantidade de gratuidade: ${quantGratuidade}\nQuantidade de meia-hospedagem: ${quantMeia}\nValor total: ${valorTotal}`)

			inicio();
		}

		function reserva_quartos() {
			alert('HOTEL PROANO - RESERVA DE QUARTOS\nConfirme o valor da diaria e seu nome, que ja foi cadastrado.');

			//nomeHosp,valorDiaria

			let nomeHosp =  String(prompt("Informe seu nome:"))
			let valorDiaria = parseFloat(prompt("Informe o valor da diaria:"))
			
			let encontrado = false
			for(let i = 0; i <= hospedes.length(); i++){
				if(hospedes[i].nome == nomeHosp && hospedes[i].valorDiaria == valorDiaria){
					encontrado = true
					break
				}
			}

			if(!encontrado){
				alert("Hospede não foi encontrado!\nInforme corretamente os dados ou realizae um novo cadastro.")
				inicio()
			}else{
				alert("Hospede encontrado com sucesso!")

				let quantDias = parseInt(prompt("Informe a quantidade de dias:"))

				let numeroQuarto = parseInt(prompt("Informe o numero do quarto:"))

				while(quartos[numeroQuarto-1].status == "ocupado"){
					numeroQuarto = parseInt(prompt("Quarto ocupado! Escolha outro quarto."))
				}

				quartos[numeroQuarto-1].status = "ocupado"

				alert(`Quarto reservado com sucesso!\nNumero do quarto: ${numeroQuarto} \nNome do hospede: ${nomeHosp} \nValor a ser pago: ${valorDiaria}`)

				inicio();
			}
			
		}

		

		function abastecer_carros() {
			alert('HOTEL {NOME DO HOTEL} - ABASTECER');
			inicio();
		}

		function erro() {
			alert('Por favor, informe um número entre 1 e 4');
			inicio();
		}

		function sair() {
			var confirma = confirm('Você deseja sair?');
			// if (confirma) {
			// 	window.close();
			// } else {
			// 	inicio();
			// }
		}

		
		
		inicio();
	</script>
</head>

<body>

</body>

</html>